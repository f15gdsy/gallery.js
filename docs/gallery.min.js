!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Gallery=n()}(this,function(){"use strict";function t(t,n){return n={exports:{}},t(n,n.exports),n.exports}function n(t,n,e){e||(e={});for(var r=-1,o=n.length;++r<o;){var i=n[r];e[i]=t[i]}return e}function e(t){return!!t&&"object"==typeof t}function r(t,n){var e=null==t?void 0:t[n];return u(e)?e:void 0}function o(t){return i(t)&&U.call(t)==B}function i(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function u(t){return null!=t&&(o(t)?J.test(M.call(t)):e(t)&&G.test(t))}function a(t){return s(t)&&et.call(t,"callee")&&(!ot.call(t,"callee")||rt.call(t)==V)}function c(t){return null!=t&&f(t.length)&&!l(t)}function s(t){return d(t)&&c(t)}function l(t){var n=p(t)?rt.call(t):"";return n==Z||n==tt}function f(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Q}function p(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function d(t){return!!t&&"object"==typeof t}function m(t){return!!t&&"object"==typeof t}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=mt}function y(t){return g(t)&&ft.call(t)==ut}function g(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function v(t){return null!=t&&(y(t)?pt.test(st.call(t)):m(t)&&at.test(t))}function b(t){return null!=t&&j(At(t))}function w(t,n){return t="number"==typeof t||gt.test(t)?+t:-1,n=null==n?jt:n,t>-1&&t%1==0&&t<n}function j(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=jt}function A(t){for(var n=S(t),e=n.length,r=e&&t.length,o=!!r&&j(r)&&(yt(t)||it(t)),i=-1,u=[];++i<e;){var a=n[i];(o&&w(a,r)||bt.call(t,a))&&u.push(a)}return u}function E(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function S(t){if(null==t)return[];E(t)||(t=Object(t));var n=t.length;n=n&&j(n)&&(yt(t)||it(t))&&n||0;for(var e=t.constructor,r=-1,o="function"==typeof e&&e.prototype===t,i=Array(n),u=n>0;++r<n;)i[r]=r+"";for(var a in t)u&&w(a,n)||"constructor"==a&&(o||!bt.call(t,a))||i.push(a);return i}function x(t,n){return null==n?t:W(n,St(n),t)}function O(t,n,e){if("function"!=typeof t)return T;if(void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,o){return t.call(n,e,r,o)};case 4:return function(e,r,o,i){return t.call(n,e,r,o,i)};case 5:return function(e,r,o,i,u){return t.call(n,e,r,o,i,u)}}return function(){return t.apply(n,arguments)}}function T(t){return t}function k(t){return null!=t&&P(Ct(t))}function C(t,n){return t="number"==typeof t||Tt.test(t)?+t:-1,n=null==n?kt:n,t>-1&&t%1==0&&t<n}function I(t,n,e){if(!_(e))return!1;var r=typeof n;if("number"==r?k(e)&&C(n,e.length):"string"==r&&n in e){var o=e[n];return t===t?t===o:o!==o}return!1}function P(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=kt}function _(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function $(t,n){if("function"!=typeof t)throw new TypeError(Pt);return n=_t(void 0===n?t.length-1:+n||0,0),function(){for(var e=arguments,r=-1,o=_t(e.length-n,0),i=Array(o);++r<o;)i[r]=e[n+r];switch(n){case 0:return t.call(this,i);case 1:return t.call(this,e[0],i);case 2:return t.call(this,e[0],e[1],i)}var u=Array(n+1);for(r=-1;++r<n;)u[r]=e[r];return u[n]=i,t.apply(this,u)}}function R(t){return $t(function(n,e){var r=-1,o=null==n?0:e.length,i=o>2?e[o-2]:void 0,u=o>2?e[2]:void 0,a=o>1?e[o-1]:void 0;for("function"==typeof i?(i=Ot(i,a,5),o-=2):(i="function"==typeof a?a:void 0,o-=i?1:0),u&&It(e[0],e[1],u)&&(i=o<3?void 0:i,o=1);++r<o;){var c=e[r];c&&t(n,c,i)}return n})}function z(t,n,e){for(var r=-1,o=St(n),i=o.length;++r<i;){var u=o[r],a=t[u],c=e(a,n[u],u,t,n);(c===c?c===a:a!==a)&&(void 0!==a||u in t)||(t[u]=c)}return t}function F(t,n){return void 0===t?n:t}function N(t,n){n||(n=document);var e=n.head||n.getElementsByTagName("head")[0];if(!e){e=n.createElement("head");var r=n.body||n.getElementsByTagName("body")[0];r?r.parentNode.insertBefore(e,r):n.documentElement.appendChild(e)}var o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),e.appendChild(o),o}function X(t,n){return t.hasOwnProperty(n)?t[n]:0}function Y(t,n){return"number"==typeof t?t+="%":"string"==typeof t&&t.indexOf("%")===-1&&(t+="%"),t+"{"+Ht(n)+"}"}function q(t){var n=Qt.call(t);return"[object Function]"===n||"function"==typeof t&&"[object RegExp]"!==n||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}var D="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},W=n,B="[object Function]",G=/^\[object .+?Constructor\]$/,L=Object.prototype,M=Function.prototype.toString,H=L.hasOwnProperty,U=L.toString,J=RegExp("^"+M.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=r,Q=9007199254740991,V="[object Arguments]",Z="[object Function]",tt="[object GeneratorFunction]",nt=Object.prototype,et=nt.hasOwnProperty,rt=nt.toString,ot=nt.propertyIsEnumerable,it=a,ut="[object Function]",at=/^\[object .+?Constructor\]$/,ct=Object.prototype,st=Function.prototype.toString,lt=ct.hasOwnProperty,ft=ct.toString,pt=RegExp("^"+st.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=function(t,n){var e=null==t?void 0:t[n];return v(e)?e:void 0}(Array,"isArray"),mt=9007199254740991,ht=dt||function(t){return m(t)&&h(t.length)&&"[object Array]"==ft.call(t)},yt=ht,gt=/^\d+$/,vt=Object.prototype,bt=vt.hasOwnProperty,wt=K(Object,"keys"),jt=9007199254740991,At=function(t){return function(n){return null==n?void 0:n[t]}}("length"),Et=wt?function(t){var n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&b(t)?A(t):E(t)?wt(t):[]}:A,St=Et,xt=x,Ot=O,Tt=/^\d+$/,kt=9007199254740991,Ct=function(t){return function(n){return null==n?void 0:n[t]}}("length"),It=I,Pt="Expected a function",_t=Math.max,$t=$,Rt=R,zt=Rt(function(t,n,e){return e?z(t,n,e):xt(t,n)}),Ft=zt,Nt=function(t,n){return $t(function(e){var r=e[0];return null==r?r:(e.push(n),t.apply(void 0,e))})}(Ft,F),Xt=Nt,Yt=function(){function t(t,n){if(!t)throw new Error(n)}function n(){}var e=["webkit","moz","MS","o",""];return{add:function(r,o,i){i=i||n,t(r,"element is required"),t(o,"type is required");for(var u=0;u<e.length;u++)e[u]||(o=o.toLowerCase()),r.addEventListener(e[u]+o,i,!1)},remove:function(r,o,i){i=i||n,t(r,"element is required"),t(o,"type is required");for(var u=0;u<e.length;u++)e[u]||(o=o.toLowerCase()),r.removeEventListener(e[u]+o,i,!1)}}}(),qt=N,Dt=function(t,n){return"string"==typeof t?t:t+n},Wt=function(t){var n=[];return Array.isArray(t)?n=2===t.length?n.concat(t,0):t:(n.push(X(t,"x")),n.push(X(t,"y")),n.push(X(t,"z"))),n=n.map(function(t){return Dt(t,"px")}),"translate3d("+n.join(",")+")"},Bt="";if("undefined"!=typeof document){Bt=null!=(document.documentElement||document.createElement("div")).style.animation?"":"-webkit-"}var Gt,Lt=Bt,Mt={scale:function(t){return"scale("+t+")"},rotate:function(t){return"rotate("+Dt(t,"deg")+")"},translate:function(t){return Wt(t)},transform:function(t){return t}},Ht=function(t){if(Array.isArray(t))return Lt+"transform:"+Wt(t);var n=[],e=[];if("object"==typeof t)for(var r in t)Mt[r]?n.push(Mt[r](t[r])):e.push(r+":"+t[r]);return e.push(Lt+"transform:"+n.join("")),e.join(";")},Ut=function(t,n){var e="@"+Lt+"keyframes "+t+"{";if(Array.isArray(n))e+=n.map(function(t,e){var r;return r=e?e/(n.length-1)*100:0,Y(r,t)}).join("");else for(var r in n)e+=Y(r,n[r]);return e+="}"},Jt=Lt?"webkitAnimation":"animation",Kt=q,Qt=Object.prototype.toString,Vt=Array.prototype.slice;"undefined"!=typeof window&&(Gt=window.Promise),void 0!==D&&(Gt=D.Promise);var Zt=function(t){return Gt?function(){var n=Vt.call(arguments),e=this;return Kt(n.slice(-1))?t.apply(e,n):new Gt(function(r,o){n.push(function(t,n){t?o(t):r.apply(this,Vt.call(arguments,1))}),t.apply(e,n)})}:t},tn=t(function(t){for(var n,e=["webkitTransform","MozTransform","msTransform","OTransform","transform"],r=document.createElement("p"),o=0;o<e.length;o++)if(n=e[o],null!=r.style[n]){t.exports=n;break}}),nn=(t(function(t,n){function e(t,n,e){for(var o=e&&e.clearTransforms===!0,i=0,u=t.length;i<u;i++)o&&r(t[i]),t[i].style[Jt]=n}function r(t){t.style.transform="",t.style[u]=""}function o(t){t.style[Jt]="",t.style.animation=""}function i(t,n){for(var e=n&&n.clearAnimations===!0,r=0,i=t.length;r<i;r++)t[r].style[u]=getComputedStyle(t[r])[u],e&&o(t[r])}if("undefined"!=typeof window)var u=tn;var a={},c={duration:1e3,fillMode:"both",easing:"ease",iterations:1,delay:0,direction:"normal",resetWhenDone:!1,clearTransformsBeforeStart:!1};n.hasAnimation=function(t){return a.hasOwnProperty(t)},n.runAnimation=Zt(function(t,n,r){if(r||(r=function(){}),"string"==typeof n&&(n={name:n}),t.length||(t=[t]),!n.name)return r(Error("must supply animation name"));var o=a[n.name];if(!o)return r(Error('no animation named "'+n.name+'" exists'));n=Xt(n,o.presets,c);var u=function(){return Yt.remove(t[0],"AnimationEnd",u),n.resetWhenDone&&i(t,{clearAnimations:!0}),r(null,t)};Yt.add(t[0],"AnimationEnd",u),e(t,[n.name,Dt(n.duration,"ms"),n.easing,n.iterations,Dt(n.delay,"ms"),n.direction,n.fillMode].join(" "),{clearTransforms:n.clearTransformsBeforeStart})}),n.unregisterAnimation=function(t){if(n.hasAnimation(t)){var e=a[t].el;e.parentNode.removeChild(e),delete a[t]}},n.getAnimationCSS=Ut,n.registerAnimation=function(t){n.unregisterAnimation(t.name);var e=qt(n.getAnimationCSS(t.name,t.animation));e.setAttribute("data-name",t.name),a[t.name]={el:e,presets:t.presets||{}}}}),function(t){for(var n=arguments,e=1;e<arguments.length;e++){var r=n[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}),en={getEl:function(t){if("string"==typeof t)return document.querySelector(t);if(t.tagName)return t;throw new TypeError("Gallery.js: Invalid elOrSelector")},getImgs:function(t){if(!Array.isArray(t))throw new TypeError("Gallery.js: Invalid imgs");return t}},rn={direction:"left",imgWidth:100,imgHeight:100,imgAlignX:.5,imgAlignY:.5,cover:!0,gapX:0,gapY:0,duration:10},on=function(t,n,e){this.el=en.getEl(t),this.imgs=en.getImgs(n),this.opts=nn({},rn,e),this.refresh()},un={_dominantSize:{}};return on.prototype.start=function(){},on.prototype.stop=function(){},on.prototype.refresh=function(){this._combineImgs(),this._createRule()},on.prototype.destroy=function(){document.head.removeChild(this.styleEl)},on.prototype._drawImg=function(t,n,e){var r=this;return new Promise(function(o,i){var u=new Image;u.src=n,u.onload=function(){var n,i,a,c,s,l,f=r.opts.imgWidth,p=r.opts.imgHeight,d=u.width/u.height,m=f/p;d<m?(a=u.width,c=u.width/m,n=0,i=(u.height-c)*r.opts.imgAlignY/100):(a=u.height*m,c=u.height,n=(u.width-a)*r.opts.imgAlignX,i=0);var h=r.opts.direction;"left"===h||"right"===h?(s=e*f+(e+1)*r.opts.gapX,l=0):"top"!==h&&"bottom"!==h||(s=0,l=e*p+(e+1)*r.opts.gapY),t.drawImage(u,n,i,a,c,s,l,f,p),o()},u.onerror=i})},on.prototype._combineImgs=function(){var t=this,n=document.createElement("canvas"),e=this.opts.direction;"left"===e||"right"===e?(n.width=this._dominantSize,n.height=this.opts.imgHeight):(n.width=this.opts.imgWidth,n.height=this._dominantSize);var r=n.getContext("2d");Promise.all(this.imgs.map(function(n,e){return t._drawImg(r,n,e)})).then(function(){var e=n.toDataURL("image/jpeg");t.el.style.backgroundImage="url("+e+")"})},on.prototype._createRule=function(){var t=document.createElement("style");document.head.appendChild(t),this.styleEl=t;var n=t.sheet,e="gallery-"+this.opts.direction+"-"+this._dominantSize;this.el.style.animationName=e,this.el.style.animationIterationCount="infinite",this.el.style.animationDuration=this.opts.duration+"s",this.el.style.animationTimingFunction="linear","left"===this.opts.direction||"right"===this.opts.direction?(this.el.style.backgroundRepeatX="repeat",this.el.style.backgroundRepeatY="no-repeat"):(this.el.style.backgroundRepeatX="no-repeat",this.el.style.backgroundRepeatY="repeat"),n.insertRule("\n      @keyframes "+e+" {\n        from {\n          background-position: 0 0;\n        }\n        to {\n          background-position: "+this._getAnimToData()+";\n        }\n      }\n    ")},on.prototype._getAnimToData=function(){var t=this._dominantSize;switch(this.opts.direction){case"left":return"-"+t+"px 0";case"right":return t+"px 0";case"top":return"0 "+t+"px";case"bottom":return"0 -"+t+"px";default:throw new Error("Gallery.js: Invalid direction",this.opts.direction)}},un._dominantSize.get=function(){var t=this.opts.direction;return"left"===t||"right"===t?this.imgs.length*(this.opts.imgWidth+this.opts.gapX):"top"===t||"bottom"===t?this.imgs.length*(this.opts.imgHeight+this.opts.gapY):void 0},Object.defineProperties(on.prototype,un),on.init=function(t,n,e){for(var r=document.querySelectorAll(t),o=[],i=0;i<r.length;i++){var u=r[i];o.push(new on(u,n,e))}return o},on});
